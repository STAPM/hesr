<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Process Hospital Episode Statistics data • hesr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Process Hospital Episode Statistics data">
<meta property="og:description" content="A collection of functions to read, clean and analyse admitted patient care hospital episode statistics data to inform the health economic modelling of tobacco and alcohol policy.">
<meta property="og:image" content="https://stapm.gitlab.io/r-packages/hesr/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-167990045-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-167990045-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">hesr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.1.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/hesr.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Technical documentation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/cleaning_and_costing.html">Methods notes: Data cleaning and cost estimation</a>
    </li>
    <li>
      <a href="articles/english_secondary_care_modelling_report.pdf">Discussion paper: Estimating numbers and costs of hospital admissions</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/STAPM/hesr" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://gitlab.com/stapm/r-packages/hesr" class="external-link">
    <span class="fab fa-gitlab fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://stapm.gitlab.io/software.html" class="external-link">
    <span class="fa fa-code"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="process-hospital-episode-statistics-data-">Process Hospital Episode Statistics data <img src="logo.png" align="right" style="padding-left:10px;background-color:white;" width="100" height="100"><a class="anchor" aria-label="anchor" href="#process-hospital-episode-statistics-data-"></a>
</h1></div>
<!-- badges: start -->

<p><a href="https://www.tidyverse.org/lifecycle/#maturing" class="external-link"><img src="https://img.shields.io/badge/lifecycle-maturing-blue.svg" alt="Lifecycle: maturing"></a></p>
<p><a href="https://doi.org/10.17605/OSF.IO/AD4VY" class="external-link"><img src="https://img.shields.io/badge/doi-10.17605/OSF.IO/AD4VY-green.svg"></a> <!-- badges: end --></p>
<div class="section level2">
<h2 id="the-sheffield-tobacco-and-alcohol-policy-modelling-platform">The Sheffield Tobacco and Alcohol Policy Modelling Platform<a class="anchor" aria-label="anchor" href="#the-sheffield-tobacco-and-alcohol-policy-modelling-platform"></a>
</h2>
<p>This R package was developed as part of the Sheffield Tobacco and Alcohol Policy Modelling <a href="https://stapm.gitlab.io/" class="external-link uri">https://stapm.gitlab.io/</a> by the <a href="https://www.sheffield.ac.uk/scharr" class="external-link">School of Health and Related Research at the University of Sheffield</a>.</p>
<p>The aim of the research programme is to identify and evaluate approaches to reducing the harm from tobacco and alcohol, with the aim of improving commissioning in a public health policy context, i.e. providing knowledge to support benefits achieved by policymakers.</p>
<p>The two objectives of the research programme are:</p>
<ul>
<li>To evaluate the health and economic effects of past trends, policy changes or interventions that have affected alcohol consumption and/or tobacco smoking</li>
<li>To appraise the health and economic outcomes of potential future trends, changes to alcohol and/or tobacco policy or new interventions</li>
</ul>
<p>The STAPM modelling is not linked to the tobacco or alcohol industry and is conducted without industry funding or influence.</p>
</div>
<div class="section level2">
<h2 id="purpose-of-making-the-code-open-source">Purpose of making the code open source<a class="anchor" aria-label="anchor" href="#purpose-of-making-the-code-open-source"></a>
</h2>
<p>The code has been made open source for the following two reasons:</p>
<ul>
<li>Transparency. Open science, allowing review and feedback to the project team on the code and methods used.</li>
<li>Methodology sharing. For people to understand the code and methods used so they might use aspects of it in their own work, e.g., because they are doing something partially related that isn’t exactly the same job and might like to ‘dip into’ elements of this code for inspiration.</li>
</ul>
</div>
<div class="section level2">
<h2 id="stage-of-testing-and-development">Stage of testing and development<a class="anchor" aria-label="anchor" href="#stage-of-testing-and-development"></a>
</h2>
<p>The code is actively being used in project work. It is being reviewed and developed all the time; more tests and checks are being added.</p>
<p>The repository is not intended to be maintained by an open source community wider than the development team.</p>
</div>
<div class="section level2">
<h2 id="disease-lists">Disease lists<a class="anchor" aria-label="anchor" href="#disease-lists"></a>
</h2>
<p>The list of diseases considered in the modelling is available here <a href="https://osf.io/v945r" class="external-link uri">https://osf.io/v945r</a></p>
</div>
<div class="section level2">
<h2 id="data-checks">Data checks<a class="anchor" aria-label="anchor" href="#data-checks"></a>
</h2>
<p>Data checks are visualisations that show the results of data processing using the hesr package.</p>
<ul>
<li><a href="https://stapm.gitlab.io/model-inputs/hosp_tobalc_scot_nat/scottish_hosp_rates_data_report.html" class="external-link">Tobcco and alcohol related hospital admissions in Scotland</a></li>
</ul>
</div>
<div class="section level2">
<h2 id="code-repositories">Code repositories<a class="anchor" aria-label="anchor" href="#code-repositories"></a>
</h2>
<p>The code on Github (<a href="https://github.com/STAPM/hesr" class="external-link uri">https://github.com/STAPM/hesr</a>) is a mirror of the code in a private Gitlab repository where the actual development takes place (<a href="https://gitlab.com/stapm/r-packages/hesr" class="external-link uri">https://gitlab.com/stapm/r-packages/hesr</a>). The code in the Github repository is linked to a repository on the Open Science Framework, which provides the doi for the package citation (<a href="https://osf.io/ad4vy/" class="external-link uri">https://osf.io/ad4vy/</a>).</p>
</div>
<div class="section level2">
<h2 id="citation">Citation<a class="anchor" aria-label="anchor" href="#citation"></a>
</h2>
<p>Gillespie D, Webster L, Angus C, Brennan A ([YEAR]). hesr: An R Package for Processing Hospital Episode Statistics Data. R package version [x.x.x]. University of Sheffield. <a href="https://stapm.gitlab.io/r-packages/hesr/" class="uri">https://stapm.gitlab.io/r-packages/hesr/</a>. doi: <a href="https://doi.org/10.17605/OSF.IO/AD4VY" class="external-link uri">https://doi.org/10.17605/OSF.IO/AD4VY</a></p>
</div>
<div class="section level2">
<h2 id="motivation">Motivation<a class="anchor" aria-label="anchor" href="#motivation"></a>
</h2>
<p>The motivation for <code>hesr</code> was to standardised the way that the Admitted Patient Care (APC) portion of the English Hospital Episode Statistics (HES) were processed to produce inputs to our decision-analytic models (<a href="https://stapm.gitlab.io/hes_data_england.html" class="external-link uri">https://stapm.gitlab.io/hes_data_england.html</a>). Functions have subsequently been added to process equivalent Scottish Morbidity Record (SMR01) data (<a href="https://www.ndc.scot.nhs.uk/National-Datasets/data.asp?SubID=5" class="external-link uri">https://www.ndc.scot.nhs.uk/National-Datasets/data.asp?SubID=5</a>) for the Scottish version of the STAPM modelling (<a href="https://stapm.gitlab.io/hes_data_scotland.html" class="external-link uri">https://stapm.gitlab.io/hes_data_scotland.html</a>).</p>
<p><code>hesr</code> was created as part of a programme of work on the health economics of tobacco and alcohol at the School of Health and Related Research (ScHARR), The University of Sheffield. This programme is based around the construction of the Sheffield Tobacco and Alcohol Policy Model (STAPM), which aims to use comparable methodologies to evaluate the impacts of tobacco and alcohol policies, and investigate the consequences of clustering and interactions between tobacco and alcohol consumption behaviours.</p>
</div>
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<p>The data contains details of all admissions to hospital. Each HES record contains a wide range of information about a patient including clinical information about diagnoses and operations, patient information such as age, sex, and socio-economic status, and administrative information such as dates of arrival.</p>
</div>
<div class="section level2">
<h2 id="information-governance">Information governance<a class="anchor" aria-label="anchor" href="#information-governance"></a>
</h2>
<p>In ScHARR, all data is stored and processed according to the <a href="https://www.sheffield.ac.uk/scharr/research/igov/policy00" class="external-link">ScHARR Information Governance Policy</a>. The HES data is stored on the University of Sheffield managed <code>heta_study</code> virtual machine, which is accessible only to team members who are using data. The working folder on the university networked X-drive is <code>PR_HES_data_TA</code>. No individual-level data is included within this package.</p>
<p>We have given a brief description of our use of the HES data in the <a href="https://stapm.gitlab.io/HES_privacy_notice.html" class="external-link">privacy notice</a>.</p>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p>The suite of functions within <code>hesr</code> reads the data for each year, renames, organises and processes the variables that we use for our analyses.</p>
<p>The <strong>inputs</strong> are the raw data files for each year and the list of diseases attributable to tobacco and/or alcohol (defined by ICD-10 codes).</p>
<p>The <strong>processes</strong> applied by the functions in <code>hesr</code> give options to:</p>
<ol style="list-style-type: decimal">
<li>Read each year of data.<br>
</li>
<li>Define spells.<br>
</li>
<li>Identify tobacco and alcohol related episodes and spells.<br>
</li>
<li>Calculate rates of hospital admission for tobacco and/or alcohol related causes.<br>
</li>
<li>Stratify rates by age, sex, socio-economic conditions (defined by Index of Multiple Deprivation) and geographical region.<br>
</li>
<li>Calculate the unit costs of hospital admissions.</li>
</ol>
<p>The <strong>output</strong> of these processes is a set of rates that describe admission to hospital, and a set of unit costs for use in health economic modelling of the effects of changes to tobacco and/or alcohol consumption.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p><code>hesr</code> is publicly available via Github.</p>
<p>By default the user should install the latest tagged version of the package. Otherwise, if you want to reproduce project work and know the version of the package used, install that version.</p>
<p>If on a University of Sheffield managed computer, install the R, RStudio and Rtools bundle from the Software Centre. Install Rtools - using the <a href="https://cran.r-project.org/web/packages/installr/index.html" class="external-link">installr</a> package can make this easier. Then install the latest or a specified version of <code>hesr</code> from Github with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#install.packages("devtools")</span></span>
<span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_git.html" class="external-link">install_git</a></span><span class="op">(</span></span>
<span>  <span class="st">"https://github.com/stapm/hesr.git"</span>, </span>
<span>  ref <span class="op">=</span> <span class="st">"x.x.x"</span>,</span>
<span>  build_vignettes <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ref = "x.x.x" is the version to install - change to the version you want e.g. "1.2.3"</span></span></code></pre></div>
<p>Or clone the package repo locally and use the ‘install and restart’ button in the Build tab of RStudio. This option is more convenient when testing development versions.</p>
<p>Then load the package, and some other packages that are useful. Note that the code within <code>hesr</code> uses the <code><a href="https://Rdatatable.gitlab.io/data.table/reference/data.table.html" class="external-link">data.table::data.table()</a></code> syntax.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load the package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://stapm.gitlab.io/r-packages/hesr/">hesr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Other useful packages</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span> <span class="co"># for data manipulation and summary</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span> <span class="co"># for pipes</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span> <span class="co"># for plotting</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://stapm.gitlab.io/HES_privacy_notice.html" class="external-link">Privacy notice</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>AGPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing hesr</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>
<a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/gillespie_d" class="external-link">Duncan Gillespie</a> <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0003-3450-5747" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Laura Webster <br><small class="roles"> Author </small>  </li>
<li>
<a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/angus_c" class="external-link">Colin Angus</a> <br><small class="roles"> Author </small>  </li>
<li>
<a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/brennan_a" class="external-link">Alan Brennan</a> <br><small class="roles"> Author </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/gillespie_d" class="external-link">Duncan Gillespie</a>, Laura Webster, <a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/angus_c" class="external-link">Colin Angus</a>, <a href="https://www.sheffield.ac.uk/scharr/sections/heds/staff/brennan_a" class="external-link">Alan Brennan</a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
