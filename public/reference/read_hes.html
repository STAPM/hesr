<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Read the HES data files  — read_hes • hesr</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Read the HES data files  — read_hes" />
<meta property="og:description" content="Reads in Hospital Episode Statistics for England data files for each year from 2002/2003." />
<meta property="og:image" content="https://stapm.gitlab.io/hesr/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-167990045-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-167990045-1');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hesr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/hesr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Functions</a>
</li>
<li>
  <a href="../articles/index.html">Technical documentation</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://gitlab.com/stapm/r-packages/hesr">
    <span class="fab fa fab fa-gitlab fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://stapm.gitlab.io/software.html">
    <span class="fa fa-code"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Read the HES data files <a href='https://www.tidyverse.org/lifecycle/#maturing'><img src='figures/lifecycle-maturing.svg' alt='Maturing lifecycle'></a></h1>
    
    <div class="hidden name"><code>read_hes.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Reads in Hospital Episode Statistics for England data files for each year from 2002/2003.</p>
    </div>

    <pre class="usage"><span class='fu'>read_hes</span><span class='op'>(</span><span class='va'>k.year.ind</span>, test <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>k.year.ind</th>
      <td><p>is the year of HES data. In the format "yy/yy".</p></td>
    </tr>
    <tr>
      <th>test</th>
      <td><p>Logical - whether to run a small sample of HES data
Defaults to FALSE. If FALSE, will output 1,000 rows of HES data. If TRUE, then will output the whole year of data.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>Returns a data table. Note that:</p><ul>
<li><p>All variable names are converted to lower case.</p></li>
</ul>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The variable names change between 13/14 and 14/15, and again between 16/17 and 17/18.
This code reads in the HES data for one year whilst selecting only the variables we need 
and formatting to be the same for each year.</p>

<p>Variables included:</p>
<ul>
<li><p>startage: age at start and end of episode. This is a derived field, calculated from episode start date (epistart) and date of birth (dob). Contains the patient's age in whole years.
(Ages from 1 to 115 (1990-91 to 1994-95) and from 1 to 120 (1995-96 onwards)).</p><ul>
<li><p>For patients under 1 year old, special codes in the range 7001 to 7007 apply:</p><ul>
<li><p>7001 = Less than 1 day</p></li>
<li><p>7002 = 1 to 6 days</p></li>
<li><p>7003 = 7 to 28 days</p></li>
<li><p>7004 = 29 to 90 days (under 3 months)</p></li>
<li><p>7005 = 91 to 181 days (approximately 3 months to under 6 months)</p></li>
<li><p>7006 = 182 to 272 days (approximately 6 months to under 9 months)</p></li>
<li><p>7007 = 273 to 364 days (approximately 9 months to under 1 year)</p></li>
<li><p>null = Not applicable (other maternity event or not known)</p></li>
</ul></li>
</ul></li>
<li><p>mydob: data of birth (month and year)</p></li>
<li><p>dob_cfl:  date of birth check flag - patient</p></li>
<li><p>ethnos: Ethnic category</p></li>
<li><p>encrypted_hesid: 1415 pseudo_hesid</p></li>
<li><p>admidate: contains the date the patient was admitted to hospital at the start of a hospital spell. Admidate is recorded on all episodes within a spell.</p></li>
<li><p>2012/13 onwards:</p><ul>
<li><p>01/01/1800 - null date submitted</p></li>
<li><p>01/01/1801 - invalid date submitted</p></li>
</ul></li>
<li><p>1989/90 to 2011/12:</p><ul>
<li><p>01/01/1600 ? null date submitted</p></li>
<li><p>15/10/1582 ? invalid date submitted</p></li>
</ul></li>
<li><p>admimeth: contains a code which identifies how the patient was admitted to hospital. Admimeth is recorded on the first and also all subsequent episodes within the spell (ie where the spell is made up of more than one episode).</p><ul>
<li><p>Elective Admission, when the decision to admit could be separated in time from the actual admission:</p><ul>
<li><p>11 = Waiting list</p></li>
<li><p>12 = Booked</p></li>
<li><p>13 = Planned Emergency Admission,</p></li>
</ul></li>
<li><p>Non-elective (emergency admission): when admission is unpredictable and at short notice because of clinical need:</p><ul>
<li><p>21 = Accident and emergency or dental casualty department of the Health Care Provider</p></li>
<li><p>22 = General Practitioner: after a request for immediate admission has been made direct to a Hospital Provider, i.e. not through a Bed bureau, by a General Practitioner: or deputy</p></li>
<li><p>23 = Bed bureau</p></li>
<li><p>24 = Consultant Clinic, of this or another Health Care Provider</p></li>
<li><p>25 = Admission via Mental Health Crisis Resolution Team</p></li>
<li><p>2A = Accident and Emergency Department of another provider where the PATIENT had not been admitted</p></li>
<li><p>2B = Transfer of an admitted patient from another Hospital Provider in an emergency</p></li>
<li><p>2C = Baby born at home as intended</p></li>
<li><p>2D = Other emergency admission</p></li>
<li><p>28 = Other means, examples are:</p><ul>
<li><p>admitted from the Accident and Emergency Department of another provider where they had not been admitted</p></li>
<li><p>transfer of an admitted patient from another Hospital Provider in an emergency</p></li>
<li><p>baby born at home as intended Maternity Admission,</p></li>
</ul></li>
</ul></li>
<li><p>Maternity admission, of a pregnant or recently pregnant woman to a maternity ward (including delivery facilities) except when the intention is to terminate the pregnancy:</p><ul>
<li><p>31 = Admitted ante-partum</p></li>
<li><p>32 = Admitted post-partum</p></li>
</ul><p>Other admission not specified above:</p></li>
<li><p>82 = The birth of a baby in this Health Care Provider</p></li>
<li><p>83 = Baby born outside the Health Care Provider except when born at home as intended.</p></li>
<li><p>81  = Transfer of any admitted patient from other Hospital Provider other than in an emergency</p></li>
<li><p>98 = Not applicable</p></li>
<li><p>99 = Not known: a validation error</p></li>
</ul></li>
<li><p>disdate: contains the date on which the patient was discharged from hospital. It is only present in the record for the last episode of a spell.</p></li>
<li><p>spelbgin: This is a derived field that contains a code that defines whether the episode is the first of a spell and whether the spell started in the current or previous year.</p><ul>
<li><p>0 = Not first episode of spell;</p></li>
<li><p>1 = First episode of spell that started in previous year;</p></li>
<li><p>2 = First episode of spell that started in current year;</p></li>
<li><p>null = Not applicable</p></li>
</ul></li>
<li><p>spelend: a code which defines whether the episode is the last of a spell. It is set for finished episodes (episode status - epistat - is 3) for general,
delivery or birth episodes (episode type - epitype - is 1, 2 or 3) provided the discharge method (dismeth) confirms that the spell has finished.
Y = Last episode of spell ; N = Not last episode of spell</p></li>
<li><p>speldur: This is a derived field that contains the difference in days between the admission date (admidate) and the discharge date (epiend)
provided the discharge method (dismeth) confirms that the spell has finished.
If the episode has not finished it is calculated from the end of the year and admidate.</p><ul>
<li><p>5n = Duration of spell in days from 0 to 29,200;</p></li>
<li><p>null = Not applicable: patient not discharged (dismeth not in range 1-5), other maternity event (epitype is 5 or 6) or not valid</p></li>
</ul></li>
<li><p>epiend: contains the date on which a patient left the care of a particular consultant, for one of the following reasons: Discharged from hospital (includes transfers) or moved to the care of another consultant.
A null entry either indicates that the episode was unfinished at the end of the data year, or the date was unknown.</p><ul>
<li><p>2012/13 onwards:</p><ul>
<li><p>01/01/1800 - null date submitted</p></li>
<li><p>01/01/1801 - invalid date submitted</p></li>
</ul></li>
<li><p>1989/90 to 2011/12:</p><ul>
<li><p>01/01/1600</p></li>
</ul></li>
</ul></li>
<li><p>epistart: contains the date on which a patient was under the care of a particular consultant. If a patient has more than one episode in a spell, for each new episode there is a new value of epistart.
However, the admission date which is copied to each new episode in a spell will remain unchanged and will be equal to the episode start date of the first episode in hospital.</p><ul>
<li><p>2012/13 onwards:</p><ul>
<li><p>01/01/1800 - null date submitted</p></li>
<li><p>01/01/1801 - invalid date submitted</p></li>
</ul></li>
<li><p>1989/90 to 2011/12:</p><ul>
<li><p>01/01/1600 ? null date submitted</p></li>
<li><p>15/10/1582 ? invalid date submitted</p></li>
</ul></li>
</ul></li>
<li><p>epiorder: contains the number of the episode within the current spell. All spells start with an episode where epiorder is 01.
Many spells finish with this episode, but if the patient moves to the care of another consultant, a new episode begins.
Episode numbers increase by 1 for each new episode until the patient is discharged (this includes transfers to another NHS trust or primary care trust -
ie the first episode in the new trust will have epiorder 01). If the same patient returns for a different spell in hospital, epiorder is again set to 01.
Admissions are calculated by counting the number of times epiorder is 01. When studying long term care, remember that it is not unusual to transfer psychiatric patients from one hospital to another.</p><ul>
<li><p>2n = The number of the episode in the sequence of episodes from 01-87;</p></li>
<li><p>98 = Not applicable;</p></li>
<li><p>99 = Not known;</p></li>
<li><p>null = Not applicable: other maternity event</p></li>
</ul></li>
<li><p>epistat: tells you whether the episode had finished before the end of the HES data-year (ie whether the episode was still 'live' at midnight on 31 March).
For example, if a patient was admitted on 25 March 2005 and was not discharged (or transferred to the care of another consultant) until 4 April 2005,
there will be a record describing the unfinished episode (episode status = 1) in the 2004-05 data, and a separate record describing the finished episode (episode status = 3) in the 2005-06 data.
Because hospital providers are advised not to include clinical data (diagnosis and operation codes) in unfinished records, these are normally excluded from analyses.
Also, if unfinished episodes are included in time series analyses - where data for more than one year is involved - there is a danger of counting the same episode twice.</p></li>
<li><p>classpat: identifies day cases, ordinary admissions, regular day and regular night attenders, and the special case of mothers and babies using only delivery facilities.
Data about regular day and regular night attenders are not available for analysis prior to 2002-03.
Since the introduction of the NHS wide clearing service in April 1996, this field has been derived from related items in the Commissioning Data Set (eg intended management).</p><ul>
<li><p>1 = Ordinary admission</p></li>
<li><p>2 = Day case admission</p></li>
<li><p>3 = Regular day attender</p></li>
<li><p>4 = Regular night attender</p></li>
<li><p>5 = Mothers and babies using only delivery facilities</p></li>
<li><p>8 = Not applicable (other maternity event)</p></li>
<li><p>9 = Not known</p></li>
</ul></li>
<li><p>mainspef: contains a code that defines the specialty under which the consultant is contracted. It can be compared with tretspef, the specialty under which the consultant worked.</p></li>
<li><p>tretspef: speciality of consultant</p></li>
<li><p>diag_xx: ICD10 coded diagnosis codes. 1-20</p></li>
<li><p>cause: copy of the first diagnosis code that represents an external cause</p></li>
<li><p>resgor: government office region of residence</p></li>
<li><p>resladst: local authority district of residence (old version of ONS coding system)</p></li>
<li><p>imd04_decile: uses IMD version 2004 on activity up to and including 2006-07; IMD version 2007 on activity between 2007-08 and 2009-10;
IMD version 2010 on activity from 2010-11 to present.</p></li>
<li><p>epikey: record identifier</p></li>
<li><p>opertn_xx: Procedure codes - before april 2007 there are 12 operate codes. after there are 24.</p></li>
<li><p>posopdur: Number of days between the main operation and the end of the episode from 0-365. null = Not applicable: no operation or episode unfinished</p></li>
</ul><p>Additional variables added for use in HRG code grouper:</p><ul>
<li><p>procodet</p></li>
<li><p>admisorc</p></li>
<li><p>disdest</p></li>
<li><p>dismeth</p></li>
<li><p>epidur</p></li>
<li><p>PROVSPNOPS</p></li>
<li><p>procode3</p></li>
</ul>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>

<span class='va'>hes_2002</span> <span class='op'>&lt;-</span> <span class='fu'>read_hes</span><span class='op'>(</span><span class='st'>"0203"</span>, test <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='op'>}</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by <a href='https://www.sheffield.ac.uk/scharr/sections/heds/staff/gillespie_d'>Duncan Gillespie</a>, Laura Webster, <a href='https://www.sheffield.ac.uk/scharr/sections/heds/staff/angus_c'>Colin Angus</a>, <a href='https://www.sheffield.ac.uk/scharr/sections/heds/staff/brennan_a'>Alan Brennan</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


